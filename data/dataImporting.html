<p>#Converting shape files
Shape files are a bundle of files consisting of at least a .dbf file and various combintations of .cpg .prj .sbn .sbx .shp .shp.xml .shx</p><p>Online tool for convertion: <a href="http://gipong.github.io/shp2geojson.js/">http://gipong.github.io/shp2geojson.js/</a>
Uses the default coordinate set ()</p><h1 id="extracting-data-from-openstreetmap">Extracting data from OpenStreetMap</h1><p>Extact using <a href="https://overpass-turbo.eu/">TurboOverpass</a></p><p>Look up tags useage: <a href="https://taginfo.openstreetmap.org/tags">TagInfo</a></p><p>Find out more information on tags: <a href="https://wiki.openstreetmap.org/wiki/Category:Tag_descriptions">OSM Wiki</a></p><h2 id="parent-referencing">Parent Referencing</h2><p>This query looks up the name of the road a crossing is on.</p><pre><code>[bbox:52.578228,1.171761,52.693864,1.525726]
//[bbox:52.62,1.2,52.64,1.4]
[out:json]
//[out:csv(::id, ::lat, ::lon, road_name, road_speed)]
[timeout:600];


node[&quot;highway&quot;=&quot;crossing&quot;];
//node(id:388706237,355519497,340919676);

foreach {

  way(bn)[&quot;name&quot;]-&gt; .ways;
  //for .ways -&gt; .way(t[&quot;name&quot;]) {
    convert result
             ::id   = id(),
             ::geom = center(geom()),
             road_name    = ways.set(t[&quot;name&quot;] ),
             road_speed = ways.set(t[&quot;maxspeed&quot;]),
             ::     = ::;
   // out;// geom;
  //}
  out geom;
}</code></pre><h1 id="extraction-queries-used">Extraction queries used</h1><h2></h2><ul>
<li>Bounding Box covering Norwich City and suburbs. See it here: <a href="http://bboxfinder.com/#52.578228,1.171761,52.693864,1.525726">http://bboxfinder.com/#52.578228,1.171761,52.693864,1.525726</a></li>
<li>Timeout of 25 seconds</li>
<li>Output to Overpass json (NOT geoJson and needs to be converted)</li>
</ul><pre><code>[bbox:1.171761,52.578228,1.525726,52.693864]
//52.5986631853,1.2371951024,52.6793324876,1.373425588
[out:json][timeout:25]</code></pre><p>Note. In the following queries, the filter <strong>nwr</strong> is used instead of joining seperate node, way and relation filters.
The global bounding box is assumed, rather than using a bbox on each query clause.</p><p>The queries used are listed in /back-end/norwich.js</p><h2 id="public-transport-publicgeojson">Public Transport (public.geojson)</h2><pre><code>nwr[railway=station];
&gt;&gt;bus stations</code></pre><h2 id="toilets-layer">TOILETS Layer</h2><p>Toilets can be recorded as seperate amenities: amenity=toilets, amenity=toilet, amenity=toilet_private</p><p>Or as tags of another feature, typically a building, in which case one or more toilet(.*) tags will be used.</p><h3 id="toilets-as-amenities">Toilets as amenities</h3><pre><code>  nwr[~&quot;^toilet(s):.*$&quot;~&quot;.&quot;];</code></pre><h3 id="toilets-as-tags-of-another-feature">Toilets as tags of another feature</h3><pre><code>  nwr[&quot;amenity&quot;~&quot;toilet.*$&quot;];</code></pre><h2 id="eatdrink-layer">EAT/DRINK Layer</h2><h2 id="shop-layer">SHOP Layer</h2><pre><code></code></pre><h2 id="help-layer">HELP Layer</h2><pre><code>nwr[amentiy=police];
&gt;&gt;walk-in centers
&gt;&gt;pharmacists
&gt;&gt; vets</code></pre><hr><pre><code> // query part for: “wheelchair=*”
  node[&quot;wheelchair&quot;]({{bbox}});
  way[&quot;wheelchair&quot;]({{bbox}});
  relation[&quot;wheelchair&quot;]({{bbox}});</code></pre><h2 id="experiment">Experiment</h2><p> [bbox:52.6213114049,1.2994429312,52.6242253769,1.3039059933]// 2 parking meters
//[bbox:52.578228,1.171761,52.693864,1.525726] // large area
[out:json]
[timeout:300];</p><p>node[amenity=vending_machine][vending=parking_tickets]-&gt;.machines;
foreach.machines-&gt;.machine(</p><p> ( make node test=&quot;spam&quot;; .machine; ); out;<br>);</p><h2 id="mapfeature-specification">MapFeature specification</h2><p>MapFeature is the class used for rendering of features on the map</p><p>Fields:</p><ul>
<li><p>Name</p>
</li>
<li><p>Location</p>
</li>
<li><p>Directions</p>
</li>
<li><p>Description</p>
</li>
<li><p>Filters</p>
</li>
<li><p>Time Which layer is the feature in?<br>Does the feature get displayed?</p>
</li>
</ul><p>What maker is used?</p><p>what is displayed in the hover?</p><p>What&#39;s displayed in the info box?
static and dynamic elements</p><p>Class MapFeature(){ layers[] baseMarker - marker class which defines the marker shape/svg, marker colour, icon, icon colour. markerModifier - name of function which can be used to modify the marker (e.g. ) visibilityFilter - name of the function to use when deciding if the marker should be displayed allowPopup - true </p><p> caption
}</p>